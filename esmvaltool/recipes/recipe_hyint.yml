# recipe_hyint.yml
---

documentation:
  description: |
    Recipe for the HyInt  package by E. Arnone and J. von Hardenberg (ISAC-CNR)

  authors:
    - arno_en
    - hard_jo

  references:
    - giorgi11jc
    - giorgi14jgr

  projects:
    - c3s-magic

datasets:
#  - {dataset: ACCESS1-0,      project: CMIP5, exp: [historical, rcp85], ensemble: r1i1p1, start_year: 2004, end_year: 2010}
# - {dataset: ACCESS1-3,      project: CMIP5, exp: [historical, rcp85], ensemble: r1i1p1, start_year: 2004, end_year: 2010}
  - {dataset: ACCESS1-0,      project: CMIP5, exp: rcp85, ensemble: r1i1p1, start_year: 2006, end_year: 2016}
  - {dataset: ACCESS1-3,      project: CMIP5, exp: rcp85, ensemble: r1i1p1, start_year: 2006, end_year: 2016}
  - {dataset: MPI-ESM-MR,      project: CMIP5, exp: rcp85, ensemble: r1i1p1, start_year: 2006, end_year: 2016}

preprocessors:
  preproc:
    extract_levels: false

diagnostics:
  hyint:
    description: HyInt hydroclimatic indices calculation and plotting
    variables:
       pr:
        preprocessor: preproc
        reference_dataset: "ACCESS1-0"
        mip: day
        field: T2Ds
    scripts:
      main:
        script: hyint/hyint.R
        # Define whether model data should be regridded 
        # a) false to keep original resolution
        # b) set desired regridding resolution in cdo format e.g., "r320x160"
        # c) "REF" to use resolution of reference model
        rgrid: false   
        # Reference normalization period to be used for normalized indices 
        norm_years: [2006,2009]
        # Select type of plot:
        # 1) lon/lat maps per individual field/exp/multi-year mean
        # 2) lon/lat maps per individual field/exp-ref-diff/multi-year mean
        # 3) lon/lat maps multi-field/exp-ref-diff/multi-year mean
        # 4) lon/lat maps multifield/exp/multiyear - skipped if using multi-year mean
        # 11) timeseries over required individual region/exp
        # 12) timeseries over multiple regions/exp
        # 13) timeseries with multiple models
        # 14) summary trend coefficients multiple regions
        # 15) summary trend coefficients multiple models
        plot_type: [2, 3, 12, 13, 14, 15]
        # User defined label to be added to trends and figures filename
        label: "test"
        # Select regions for timeseries and maps from the following list
        # 1=World, 2=World60 (60S/60N),3=Tropics (30S/30N), 4=South America, 
        # 5=Africa,6=Northi,7=America,8=India,9=Europe,10=East-Asia,
        # 11=Australia
        selregions: [2,4,5,6,7]
        # Select one or more fields for timeseries and maps from the following 
        # list (order-sensitive): 
        # SDII, DSL, WSL, HY-INT, ABS_INT, ABS_DSL, ABS_WSL, PA, R95 
        selfields: [8, 4, 1, 9, 3, 2]

       
        ## ------- Advanced settings ----------
        
        topography_highres: "~/work/data/Elevation/GMTED2010_15n030_0125deg.nc"
        boxregion: false  #-2 # !=0 plot region boxes over maps with thickness = abs(boxregion) and 
                         # white (>0) or grey (<0).  This automatically works on global maps only.

