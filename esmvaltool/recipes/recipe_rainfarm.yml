# recipe_rainfarm.yml
---

documentation:
  description: |
    Recipe for performing stochastic downscaling of precipitation fields
    calling the RainFARM package by J. von Hardenberg (ISAC-CNR)
  authors:
    - arno_en
    - hard_jo

  references:
    - donofrio14jh
    - rebora06jhm

  projects:
    - c3s-magic

datasets:
  - {dataset: EC-EARTH,       project: CMIP5, exp: historical, ensemble: r1i1p1, start_year: 1997, end_year: 1997}

preprocessors:
  preproc:
    extract_levels: false

diagnostics:
  rainfarm:
    description: RainFARM stochastic downscaling of precipitation fields
    variables:
      pr:
        preprocessor: preproc
        reference_dataset: "EC-Earth"
        mip: day
        field: T2Ds
    scripts:
      main:
        script: rainfarm/main.r
        # Diagnostic arguments: set FALSE to void and allow RainFARM automated setting
        force_processing: true      # TRUE to rewrite existing output file
        rlonlatdata: [4,13,44,53]   # Subsetting of region where calculation is to be performed. 
                                    # The selected region needs to have equal number of longitude 
                                    # and latitude grid points. 
                                    # Warning: downcaling can reach very high resolution so select limited area.  
                                    # NOTE: lon(0/360) 
        rgrid: false #"r320x160"    # set desired regridding resolution (e.g., comparing different datasets)  
        slope: 1.7 # spatial spectral slope       
        nens: 2    # number of ensemble members to be calculated
        nf:   8    # subdivisions for downscaling

